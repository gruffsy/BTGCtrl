{% extends 'base.html' %}
{% block body %}
<div class="container-fluid songs-container">
    <div class="row">
        <p>{{ customer.kunde }}</p>
    </div>
</div>


<div class="container">
    <div id="accordion">
        {% regroup objects by etg as etg_list %}
        {% for e in etg_list %}
        <div class="card-header" id="heading{{ forloop.counter }}">
            <button class="btn btn-link" data-toggle="collapse" data-target="#collapse{{ forloop.counter }}"
                    aria-expanded="true"
                    aria-controls="collapse{{ forloop.counter }}">
                {{ e.grouper }}. etasje oldefar:{{ forloop.counter }}
            </button>
        </div>
        {% regroup e.list by lokasjon as lokasjon_list %}
        <div id="collapse{{ forloop.counter }}" class="collapse" aria-labelledby="heading{{ forloop.counter }}"
             data-parent="#accordion">
            {% for l in lokasjon_list %}
            <div class="card-body" id="child{{ forloop.counter }}">
                <a href="#" data-toggle="collapse" data-target="#grandchild{{ forloop.counter }}"
                   data-parent="#child{{ forloop.counter }}">Lokasjon: {{ l.grouper }} loop:{{ forloop.counter }}</a>
                {%regroup l.list by plassering as plassering_list %}
                {% for p in plassering_list %}
                <div class="card-body" id="grandchild{{ forloop.counter }}">
                    <a href="#" data-toggle="collapse" data-target="#collapse{{ forloop.counter }}a"
                       data-parent="#grandchild{{ forloop.counter }}">Plassering:
                        {{ p.grouper }} </a>
                    {% for obj in p.list %}

                    <div class="card-body collapse" data-parent="#grandchild{{ forloop.counter }}"
                         id="collapse{{ forloop.counter }}a">
                        Objekt: {{ obj.refnr }} - {{ obj.extinguishant.fabrikat }} {{ obj.extinguishant.type }}
                        {% if obj.extinguishant.lengde is not None %}
                        {{ obj.extinguishant.lengde }}a
                        {% endif %}
                        {% if obj.extinguishant.slukkemiddel is not None %}
                        {{ obj.extinguishant.slukkemiddel }}
                        {% endif %}
                    </div>

                    {% endfor %}
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
